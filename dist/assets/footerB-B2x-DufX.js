import{o as d,c as u,b as r,n as k,d as b,m as H,p as V,q as M,u as T,r as f,a as c,k as g,l as h,t as p,x as A,F as L,e as B,g as C,i as I,w as O,y as E,s as w,j as S,z as F}from"./index-DglDEnDz.js";const _=(t,e)=>{const o=t.__vccOpts||t;for(const[n,a]of e)o[n]=a;return o},U={name:"HamburgerMenu",props:{isMenuVisible:{type:Boolean,required:!0}}};function N(t,e,o,n,a,i){return d(),u("div",{class:"hamburger",onClick:e[0]||(e[0]=(...s)=>t.toggleMenu&&t.toggleMenu(...s))},[r("div",{class:k(["line",{"line-1":o.isMenuVisible}])},null,2),r("div",{class:k(["line",{"line-2":o.isMenuVisible}])},null,2),r("div",{class:k(["line",{"line-3":o.isMenuVisible}])},null,2)])}const z=_(U,[["render",N],["__scopeId","data-v-e4c072fc"]]),y="https://yalarba.ru/api",Z=async t=>(await b.post(`${y}/auth/login`,t,{"Content-Type":"application/json"})).data,j=async t=>(await b.get(`${y}/auth/check`,{headers:{Authorization:`Bearer ${t}`}})).data,$={login:Z,checkAuth:j};class v extends Error{}v.prototype.name="InvalidTokenError";function q(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,o)=>{let n=o.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function P(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return q(e)}catch{return atob(e)}}function R(t,e){if(typeof t!="string")throw new v("Invalid token specified: must be a string");e||(e={});const o=e.header===!0?0:1,n=t.split(".")[o];if(typeof n!="string")throw new v(`Invalid token specified: missing part #${o+1}`);let a;try{a=P(n)}catch(i){throw new v(`Invalid token specified: invalid base64 for part #${o+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new v(`Invalid token specified: invalid json for part #${o+1} (${i.message})`)}}const G=H("auth",()=>{const t=V({username:"",email:"",id:0,token:""}),e=M(!1),o=async i=>{try{const s=await $.login(i),l=R(s.token);t.name=l.user.username,t.id=l.user.id,t.email=l.user.email,e.value=!0,t.token=s.token}catch(s){throw console.error("Login failed",s),s}},n=()=>{e.value=!1,t.name="",t.token="",t.email="",t.id=0};return{user:t,isAuthenticated:e,login:o,logout:n,checkAuth:async()=>{try{const i=t.token;if(i)try{const s=await $.checkAuth(i);t.value=s.user,e.value=!0}catch{n()}}catch(i){throw console.error("Check auth failed",i),i}}}}),J={setup(){const{t}=T(),e=G();return{t,authStore:e}},name:"menuH",components:{HamburgerMenu:z},data(){return{isMenuVisible:!1}},mounted(){document.addEventListener("click",this.closeMenuIfClickedOutside)},beforeUnmount(){document.removeEventListener("click",this.closeMenuIfClickedOutside)},methods:{toggleMenu(){this.isMenuVisible=!this.isMenuVisible},closeMenuIfClickedOutside(t){this.$el.contains(t.target)||(this.isMenuVisible=!1)}}};function K(t,e,o,n,a,i){const s=f("HamburgerMenu"),l=f("router-link");return d(),u("div",{class:"menuH",onClick:e[7]||(e[7]=(...m)=>i.toggleMenu&&i.toggleMenu(...m))},[c(s,{isMenuVisible:a.isMenuVisible},null,8,["isMenuVisible"]),r("ul",{id:"ul-m",class:k({visible:a.isMenuVisible})},[r("li",{onClick:e[0]||(e[0]=m=>t.$refs.profile.$el.click())},[c(l,{to:"/profile",ref:"profile"},{default:g(()=>[h(p(n.t("messages.profile")),1)]),_:1},512)]),r("li",{onClick:e[1]||(e[1]=m=>t.$refs.settings.$el.click())},[c(l,{to:"/settings",ref:"settings"},{default:g(()=>[h(p(n.t("messages.settings")),1)]),_:1},512)]),r("li",{onClick:e[2]||(e[2]=m=>t.$refs.about.$el.click())},[c(l,{to:"/about",ref:"about"},{default:g(()=>[h(p(n.t("messages.about")),1)]),_:1},512)]),r("li",{onClick:e[3]||(e[3]=m=>t.$refs.support.$el.click())},[c(l,{to:"/support",ref:"support"},{default:g(()=>[h(p(n.t("messages.technicalSupport")),1)]),_:1},512)]),r("li",{onClick:e[4]||(e[4]=m=>t.$refs.feetback.$el.click())},[c(l,{to:"/feetback",ref:"feetback"},{default:g(()=>[h(p(n.t("messages.writeFeedback")),1)]),_:1},512)]),r("li",{onClick:e[5]||(e[5]=m=>t.$refs.registration.$el.click())},[c(l,{to:"/registration",ref:"registration"},{default:g(()=>[h(p(n.t("messages.registration")),1)]),_:1},512)]),r("li",{onClick:e[6]||(e[6]=m=>t.$refs.login.$el.click())},[c(l,{to:"/login",ref:"login"},{default:g(()=>[h(p(n.authStore.isAuthenticated?n.t("messages.logout"):n.t("messages.login")),1)]),_:1},512)])],2)])}const Q=_(J,[["render",K],["__scopeId","data-v-d5d87da0"]]),W="/assets/logo150x150-De-v7fGb.png",X={};function Y(t,e){const o=f("router-link");return d(),A(o,{to:"/about",id:"rl-about"},{default:g(()=>e[0]||(e[0]=[r("img",{src:W,alt:"logo"},null,-1)])),_:1})}const ee=_(X,[["render",Y],["__scopeId","data-v-da10bb5b"]]),te=[{code:"en",name:"English"},{code:"ru",name:"Русский"},{code:"bak",name:"Башҡорт"},{code:"tat",name:"Татар"}],ne={languages:te},oe={data(){return{isDropdownOpen:!1,languages:ne.languages}},methods:{changeLanguage(t){this.$i18n.locale=t,this.isDropdownOpen=!1},toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen},closeDropdown(t){this.$el.contains(t.target)||(this.isDropdownOpen=!1)}},mounted(){document.addEventListener("click",this.closeDropdown)},beforeUnmount(){document.removeEventListener("click",this.closeDropdown)}},se={class:"language-selector"},ie={key:0,class:"dropdown-menu"},re=["onClick"];function ae(t,e,o,n,a,i){return d(),u("div",se,[r("div",{class:"lang-icon",onClick:e[0]||(e[0]=(...s)=>i.toggleDropdown&&i.toggleDropdown(...s))},[r("i",null,p(t.$i18n.locale),1)]),a.isDropdownOpen?(d(),u("div",ie,[(d(!0),u(L,null,B(a.languages,s=>(d(),u("div",{key:s.code,class:"dropdown-item",onClick:l=>i.changeLanguage(s.code)},p(s.name),9,re))),128))])):C("",!0)])}const le=_(oe,[["render",ae],["__scopeId","data-v-f5abd657"]]),ce={name:"ThemeToggle",setup(){const t=M(!1),e=localStorage.getItem("theme");if(e)t.value=e==="dark";else{const a=window.matchMedia("(prefers-color-scheme: dark)").matches;t.value=a}const o=()=>{const a=t.value?"dark":"light";document.documentElement.setAttribute("data-theme",a),localStorage.setItem("theme",a)},n=()=>{o()};return I(()=>{o()}),{isDarkTheme:t,toggleTheme:n}}},de={class:"theme-toggle"},ue={class:"theme-toggle__label"};function ge(t,e,o,n,a,i){return d(),u("div",de,[r("label",ue,[O(r("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>n.isDarkTheme=s),onChange:e[1]||(e[1]=(...s)=>n.toggleTheme&&n.toggleTheme(...s)),class:"theme-toggle__input"},null,544),[[E,n.isDarkTheme]]),e[2]||(e[2]=r("span",{class:"theme-toggle__slider"},null,-1))])])}const me=_(ce,[["render",ge],["__scopeId","data-v-0d1e5383"]]),pe={name:"flagInOut",setup(){return I(()=>{w.dispatch("checkAuth")}),{isAuth:S(()=>w.getters.isAthenticated)}}},fe={class:"InOut"},he={key:0},_e={key:1};function ve(t,e,o,n,a,i){const s=f("router-link");return d(),u("div",fe,[n.isAuth?(d(),u("div",he,[c(s,{onclick:"",to:"/",id:"in"},{default:g(()=>e[0]||(e[0]=[h("OUT")])),_:1})])):(d(),u("div",_e,[c(s,{to:"/login",id:"out"},{default:g(()=>e[1]||(e[1]=[h("IN")])),_:1})]))])}const ke=_(pe,[["render",ve],["__scopeId","data-v-a5cc593d"]]),we={components:{Flag:ke,MenuH:Q,LogoH:ee,Lang:le,DarkThemeToggleI:me},name:"headerM"},$e={class:"header"};function be(t,e,o,n,a,i){const s=f("LogoH"),l=f("DarkThemeToggleI"),m=f("Lang"),D=f("Flag"),x=f("MenuH");return d(),u("div",$e,[c(s),c(l),c(m),c(D),c(x)])}const Se=_(we,[["render",be],["__scopeId","data-v-bc953cf1"]]),Me={name:"MenuIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ce=["aria-hidden","aria-label"],Ie=["fill","width","height"],ye={d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"},De={key:0};function xe(t,e,o,n,a,i){return d(),u("span",F(t.$attrs,{"aria-hidden":o.title?null:"true","aria-label":o.title,class:"material-design-icon menu-icon",role:"img",onClick:e[0]||(e[0]=s=>t.$emit("click",s))}),[(d(),u("svg",{fill:o.fillColor,class:"material-design-icon__svg",width:o.size,height:o.size,viewBox:"0 0 24 24"},[r("path",ye,[o.title?(d(),u("title",De,p(o.title),1)):C("",!0)])],8,Ie))],16,Ce)}const He=_(Me,[["render",xe]]),Ve="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='m313-440%20224%20224-57%2056-320-320%20320-320%2057%2056-224%20224h487v80H313Z'/%3e%3c/svg%3e",Te="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M240-200h120v-240h240v240h120v-360L480-740%20240-560v360Zm-80%2080v-480l320-240%20320%20240v480H520v-240h-80v240H160Zm320-350Z'/%3e%3c/svg%3e",Ae="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e8eaed'%3e%3cpath%20d='M647-440H160v-80h487L423-744l57-56%20320%20320-320%20320-57-56%20224-224Z'/%3e%3c/svg%3e",Le={components:{MenuIcon:He},name:"footerB",methods:{goBack(){this.$router.go(-1)},goForward(){this.$router.go(1)}}},Be={class:"footer"};function Oe(t,e,o,n,a,i){const s=f("router-link");return d(),u("div",Be,[r("div",{class:"navigation",onClick:e[0]||(e[0]=(...l)=>i.goBack&&i.goBack(...l))},e[2]||(e[2]=[r("img",{src:Ve,alt:"back"},null,-1)])),c(s,{to:"/",class:"navigation"},{default:g(()=>e[3]||(e[3]=[r("img",{src:Te,alt:"home"},null,-1)])),_:1}),r("div",{class:"navigation",onClick:e[1]||(e[1]=(...l)=>i.goForward&&i.goForward(...l))},e[4]||(e[4]=[r("img",{src:Ae,alt:"forward"},null,-1)]))])}const Fe=_(Le,[["render",Oe],["__scopeId","data-v-0fdbac37"]]);export{Se as F,_,Fe as a};

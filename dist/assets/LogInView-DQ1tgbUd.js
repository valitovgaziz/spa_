import{_ as c,F as w,a as b}from"./footer-BORBhbRh.js";import{u as y,o as h,c as f,b as t,t as a,w as u,v as p,f as v,a as l,F,r as d}from"./index-DU3krtJ1.js";const x={setup(){const{t:s}=y();return{t:s}},data(){return{email:"",password:""}},methods:{handleSubmit(){if(!this.isValid(this.email,this.password)){alert("Пожалуйста, заполните все поля корректно.");return}this.loginUser({email:this.email,password:this.password}).then(()=>{this.$router.push("/")}).catch(s=>{console.error(s),alert("Неверный email или пароль. Попробуйте снова.")})},isValid(s,e){return!(s.length===0||e.length===0||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||e.length<6)},async loginUser(s){console.log("Login by this data: ",s);try{if(!(await fetch("https://yalarba.ru/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw new Error("Неверный email или пароль")}catch(e){throw e}}}},S={class:"login-form"},V={class:"form-group"},I={for:"email"},L={class:"form-group"},U={for:"password"},k={type:"submit"};function B(s,e,m,r,n,i){return h(),f("div",S,[t("h1",null,a(r.t("messages.inout.login")),1),t("form",{onSubmit:e[2]||(e[2]=v((...o)=>i.handleSubmit&&i.handleSubmit(...o),["prevent"]))},[t("div",V,[t("label",I,a(r.t("messages.inout.email"))+": ",1),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.email=o),type:"email",id:"email",required:"",placeholder:"t('messages.inout.email')"},null,512),[[p,n.email,void 0,{trim:!0}]])]),t("div",L,[t("label",U,a(r.t("messages.inout.password"))+": ",1),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.password=o),type:"password",id:"password",required:"",placeholder:"t('messages.inout.password')"},null,512),[[p,n.password,void 0,{trim:!0}]])]),t("button",k,a(r.t("messages.inout.login")),1)],32)])}const H=c(x,[["render",B],["__scopeId","data-v-651243dc"]]),N={components:{FHeader:w,Footer:b,LogIn:H}};function T(s,e,m,r,n,i){const o=d("FHeader"),_=d("LogIn"),g=d("Footer");return h(),f(F,null,[l(o),l(_),l(g)],64)}const D=c(N,[["render",T]]);export{D as default};

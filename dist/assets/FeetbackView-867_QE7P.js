import{_ as u,H as b,F as f}from"./footer-G2oOuqdS.js";import{a as v}from"./axios-upsvKRUO.js";import{o as i,c as n,b as r,w as R,v as g,t as d,F as h,d as y,a as c,r as w}from"./index-NsvLBzOd.js";const F={data(){return{reviews:[],newReview:"",showAll:!1}},computed:{displayedReviews(){return this.showAll?this.reviews:this.reviews.slice(0,5)}},mounted(){this.loadReviews()},methods:{async loadReviews(){try{const t=await v.get("https://yalarba.ru/api/reviews");this.reviews=t.data.sort((e,l)=>new Date(l.created_at)-new Date(e.created_at))}catch(t){console.error("Ошибка при загрузке отзывов:",t)}},async submitReview(){if(this.newReview.trim())try{const t=await v.post("https://yalarba.ru/api/reviews",{text:this.newReview});this.reviews.unshift(t.data),this.newReview=""}catch(t){console.error("Ошибка при отправке отзыва:",t)}},formatDate(t){return new Date(t).toLocaleString()},toggleShowAll(){this.showAll=!this.showAll}}},k={class:"reviews-container"},x={class:"add-review"},A=["disabled"],D=["disabled"],S={class:"reviews-list"};function H(t,e,l,m,a,o){return i(),n("div",k,[e[3]||(e[3]=r("h2",null,"Отзывы о приложении",-1)),r("div",x,[R(r("textarea",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.newReview=s),placeholder:"Напишите ваш отзыв...",rows:"4"},null,512),[[g,a.newReview]]),r("button",{onClick:e[1]||(e[1]=(...s)=>o.submitReview&&o.submitReview(...s)),disabled:!a.newReview.trim()},"Оставить отзыв",8,A),r("button",{onClick:e[2]||(e[2]=(...s)=>o.toggleShowAll&&o.toggleShowAll(...s)),disabled:a.reviews.length===0},d(a.showAll?"Скрыть":"Показать все"),9,D)]),r("div",S,[(i(!0),n(h,null,y(o.displayedReviews,s=>(i(),n("div",{key:s.id,class:"review-item"},[r("p",null,d(s.text),1),r("small",null,d(o.formatDate(s.created_at)),1)]))),128))])])}const V=u(F,[["render",H],["__scopeId","data-v-3bfbbe49"]]),B={components:{Header:b,Footer:f,Feetback:V}};function C(t,e,l,m,a,o){const s=w("Header"),p=w("Feetback"),_=w("Footer");return i(),n(h,null,[c(s),c(p),c(_)],64)}const I=u(B,[["render",C]]);export{I as default};

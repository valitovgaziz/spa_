import{_ as h,F as f,a as b}from"./footer-UGdvr-j3.js";import{a as u}from"./axios-upsvKRUO.js";import{u as R,o as n,c as l,b as r,t as i,w as g,v as F,F as m,d as y,a as d,r as v}from"./index-C-IYgP8H.js";const k={setup(){const{t:e}=R();return{t:e}},data(){return{reviews:[],newReview:"",showAll:!1}},computed:{displayedReviews(){return this.showAll?this.reviews:this.reviews.slice(0,5)}},mounted(){this.loadReviews()},methods:{async loadReviews(){try{const e=await u.get("https://yalarba.ru/api/reviews/reviews");this.reviews=e.data.sort((s,c)=>new Date(c.created_at)-new Date(s.created_at))}catch(e){console.error("Ошибка при загрузке отзывов:",e)}},async submitReview(){if(this.newReview.trim())try{const e=await u.post("https://yalarba.ru/api/reviews/reviews",{text:this.newReview});this.reviews.unshift(e.data),this.newReview=""}catch(e){console.error("Ошибка при отправке отзыва:",e)}},formatDate(e){return new Date(e).toLocaleString()},toggleShowAll(){this.showAll=!this.showAll}}},x={class:"reviews-container"},A={class:"add-review"},D=["disabled"],S=["disabled"],V={class:"reviews-list"};function B(e,s,c,w,a,o){return n(),l("div",x,[r("h2",null,i(w.t("messages.reviews.h2review")),1),r("h4",null,i(w.t("messages.reviews.h4review")),1),r("div",A,[g(r("textarea",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.newReview=t),placeholder:"Напишите ваш отзыв...",rows:"4"},null,512),[[F,a.newReview]]),r("button",{onClick:s[1]||(s[1]=(...t)=>o.submitReview&&o.submitReview(...t)),disabled:!a.newReview.trim()},"Оставить отзыв",8,D),r("button",{onClick:s[2]||(s[2]=(...t)=>o.toggleShowAll&&o.toggleShowAll(...t)),disabled:a.reviews.length===0},i(a.showAll?"Скрыть":"Показать все"),9,S)]),r("div",V,[(n(!0),l(m,null,y(o.displayedReviews,t=>(n(),l("div",{key:t.id,class:"review-item"},[r("p",null,i(t.text),1),r("small",null,i(o.formatDate(t.created_at)),1)]))),128))])])}const C=h(k,[["render",B],["__scopeId","data-v-d1682f76"]]),H={components:{FHeader:f,Footer:b,Feetback:C}};function I(e,s,c,w,a,o){const t=v("FHeader"),_=v("Feetback"),p=v("Footer");return n(),l(m,null,[d(t),d(_),d(p)],64)}const M=h(H,[["render",I]]);export{M as default};

import{_ as m,F as b,a as g}from"./footerB-B2x-DufX.js";import{u as f,d as h,o as l,c as w,b as r,t as n,w as R,v as F,F as _,e as x,a as d,r as v}from"./index-DglDEnDz.js";const y={setup(){const{t:e}=f();return{t:e}},data(){return{reviews:[],newReview:"",showAll:!1}},computed:{displayedReviews(){return this.showAll?this.reviews:this.reviews.slice(0,5)}},mounted(){this.loadReviews()},methods:{async loadReviews(){try{const e=await h.get("https://yalarba.ru/api/reviews/reviews");this.reviews=e.data.sort((t,c)=>new Date(c.created_at)-new Date(t.created_at))}catch(e){console.error("Ошибка при загрузке отзывов:",e)}},async submitReview(){if(this.newReview.trim())try{const e=await h.post("https://yalarba.ru/api/reviews/reviews",{text:this.newReview});this.reviews.unshift(e.data),this.newReview=""}catch(e){console.error("Ошибка при отправке отзыва:",e)}},formatDate(e){return new Date(e).toLocaleString()},toggleShowAll(){this.showAll=!this.showAll}}},k={class:"reviews-container"},A={class:"add-review"},D=["placeholder"],B=["disabled"],S=["disabled"],V={class:"reviews-list"};function C(e,t,c,a,i,o){return l(),w("div",k,[r("h2",null,n(a.t("messages.reviews.h2review")),1),r("h4",null,n(a.t("messages.reviews.h4review")),1),r("div",A,[R(r("textarea",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.newReview=s),placeholder:a.t("messages.reviews.textareaplaceholder"),rows:"4"},null,8,D),[[F,i.newReview]]),r("button",{onClick:t[1]||(t[1]=(...s)=>o.submitReview&&o.submitReview(...s)),disabled:!i.newReview.trim()},n(a.t("messages.reviews.button")),9,B),r("button",{onClick:t[2]||(t[2]=(...s)=>o.toggleShowAll&&o.toggleShowAll(...s)),disabled:i.reviews.length===0},n(i.showAll?a.t("messages.reviews.hide"):a.t("messages.reviews.viewAll")),9,S)]),r("div",V,[(l(!0),w(_,null,x(o.displayedReviews,s=>(l(),w("div",{key:s.id,class:"review-item"},[r("p",null,n(s.text),1),r("small",null,n(o.formatDate(s.created_at)),1)]))),128))])])}const H=m(y,[["render",C],["__scopeId","data-v-d1550644"]]),I={name:"reviews",components:{FHeader:b,Feetback:H,FooterB:g}};function L(e,t,c,a,i,o){const s=v("FHeader"),u=v("Feetback"),p=v("FooterB");return l(),w(_,null,[d(s),d(u),d(p)],64)}const M=m(I,[["render",L]]);export{M as default};

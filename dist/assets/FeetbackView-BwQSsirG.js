import{_ as u,H as f,F as b}from"./footer-DaCyi0ZC.js";import{a as v}from"./axios-upsvKRUO.js";import{o as n,c as a,b as o,w as R,v as g,t as d,F as h,d as F,a as c,r as w}from"./index-C0phyTzL.js";const k={data(){return{reviews:[],newReview:"",showAll:!1}},computed:{displayedReviews(){return this.showAll?this.reviews:this.reviews.slice(0,5)}},mounted(){this.loadReviews()},methods:{async loadReviews(){try{const t=await v.get("http://213.108.4.63:3000/reviews");this.reviews=t.data.sort((e,l)=>new Date(l.created_at)-new Date(e.created_at))}catch(t){console.error("Ошибка при загрузке отзывов:",t)}},async submitReview(){if(this.newReview.trim())try{const t=await v.post("http://213.108.4.63:3000/reviews",{text:this.newReview});this.reviews.unshift(t.data),this.newReview=""}catch(t){console.error("Ошибка при отправке отзыва:",t)}},formatDate(t){return new Date(t).toLocaleString()},toggleShowAll(){this.showAll=!this.showAll}}},x={class:"reviews-container"},y={class:"add-review"},A=["disabled"],D=["disabled"],S={class:"reviews-list"};function H(t,e,l,m,i,r){return n(),a("div",x,[e[3]||(e[3]=o("h2",null,"Отзывы о приложении",-1)),o("div",y,[R(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.newReview=s),placeholder:"Напишите ваш отзыв...",rows:"4"},null,512),[[g,i.newReview]]),o("button",{onClick:e[1]||(e[1]=(...s)=>r.submitReview&&r.submitReview(...s)),disabled:!i.newReview.trim()},"Оставить отзыв",8,A),o("button",{onClick:e[2]||(e[2]=(...s)=>r.toggleShowAll&&r.toggleShowAll(...s)),disabled:i.reviews.length===0},d(i.showAll?"Скрыть":"Показать все"),9,D)]),o("div",S,[(n(!0),a(h,null,F(r.displayedReviews,s=>(n(),a("div",{key:s.id,class:"review-item"},[o("p",null,d(s.text),1),o("small",null,d(r.formatDate(s.created_at)),1)]))),128))])])}const V=u(k,[["render",H],["__scopeId","data-v-dfaedd6f"]]),B={components:{Header:f,Footer:b,Feetback:V}};function C(t,e,l,m,i,r){const s=w("Header"),_=w("Feetback"),p=w("Footer");return n(),a(h,null,[c(s),c(_),c(p)],64)}const I=u(B,[["render",C]]);export{I as default};
